# SoapRequest Microservice

Generated by archetype version: 0.3-SNAPSHOT

## Introduction

SoapRequest Microservice is a SpringBoot RESTful service generated from the INS Microservice Maven archetype.
It was generated with the following parameters:

groupId = uk.gov.defra.tracesx
artifactId = soaprequest-microservice
- SERVICE_GET = true
- SERVICE_POST = true
- SERVICE_PATCH = true
- SERVICE_DELETE = true
- SERVICE_PORT = 4000
- PERSISTENCE = true
- SERVICE_DB_USER = ${DB_USER}
- SERVICE_DB_PASSWORD = ${DB_PASSWORD}
- CLIENT = false
- CLIENT_ENTITY = clientEntity
- CLIENT_GET = false
- CLIENT_POST = false
- CLIENT_PATCH = false
- CLIENT_DELETE = false
- PERMISSIONS = false

## Pre-Requisites

SoapRequest Microservice prerequisites

### Environment Variables

export SERVICE_SCHEME=http
export SERVICE_HOST=import-notification-commoditycode-service
export SERVICE_USER=importer
export SERVICE_PASSWORD=password123
export DATABASE_DB_USER=SA
export DATABASE_DB_PASSWORD=dockerPassword1!
export DATABASE_DB_PORT=1401
export DATABASE_DB_NAME=importnotification
export DATABASE_DB_HOST=import-notification-database
export TRUST_SERVER_CERTIFICATE=true
export DATABASE_DB_CONNECTION_STRING="jdbc:sqlserver://${DATABASE_DB_HOST}:${DATABASE_DB_PORT};database=${DATABASE_DB_NAME};encrypt=true;trustServerCertificate=${TRUST_SERVER_CERTIFICATE};hostNameInCertificate=*.database.windows.net;"
export DB_USER=commodityCodeServiceUser
export DB_PASSWORD=Password1
export DB_HOST=${IP_ADDRESS}
export DB_PORT=1401
export SERVICE_BASIC_AUTH_LOGIN=importer
export SERVICE_BASIC_AUTH_PASSWORD=password123
export DB_NAME=importnotification
export BASE_SERVICE_DB_PASSWORD=Password1

### Dependencies

In order to run the service you will need the following dependencies

- JDK v1.8
- Maven v3

## How to run

The service can be installed and run with:

```
./go
```

### Intellij setup

- See related instructions in `notification-service` for setting up Intellij
- Ensure that all environment variables are set correctly within the Intellij 'Run/Debug configuration'


## How to test

### Unit Tests

Unit tests can be run with:

```
mvn clean test
```

The coverage report can be created with:

```
mvn clean test jacoco:report
```

The coverage report can then be viewed by opening the `target/site/jacoco/index.html` file in your browser.

### Integration Tests

See the 'integration' project for further details on how to run integration tests.

## How to create Docker images

Please refer to [TracesX documentation](https://eaflood.atlassian.net/wiki/spaces/IM/pages/462356656/Docker+for+Local+Development).

## Directory Structure

The directory structure is laid out according to standard Maven project structure:

## Source files

- `src/main/java` - Java source files
- `src/test/java` - Java unit test files


### Source packages

#### `uk.gov.defra.tracesx`

The root package for the Application.  Includes the Spring Boot Application.

### Resource files

- `src/main/resources` - resource files
- `src/test/resources` - unit test resource files

## Logging

A custom configuration is created for use with Application Insights (the Azure centralised logging platform).
